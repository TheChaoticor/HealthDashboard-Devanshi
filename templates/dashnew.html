<!DOCTYPE html>
<html>
<head>
    <title>Health Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            display: flex;
            min-height: 100vh;
            margin: 0;
        }
        .sidebar {
            width: 250px;
            background-color: #f8f9fa;
            padding: 1rem;
            border-right: 1px solid #ddd;
        }
        .main-content {
            flex: 1;
            padding: 2rem;
        }
        .meter {
            height: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }
        .meter-fill {
            height: 100%;
            background: #28a745;
            width: 0;
            transition: width 0.5s ease;
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <h5>Nearby Hospitals</h5>
        <form id="cityForm">
            <label for="city">Enter City</label>
            <input type="text" id="city" class="form-control" placeholder="e.g., Pune">
            <button class="btn btn-primary mt-2" type="submit">Search</button>
        </form>
        
        <input type="text" id="city-input" placeholder="Enter your city" />
<button onclick="fetchHospitals()">Find Hospitals</button>

<div id="hospital-sidebar"></div>

<script>
  function fetchHospitals() {
    const city = document.getElementById('city-input').value.trim().toLowerCase();

    fetch(`/api/hospitals?city=${city}`)
      .then(response => response.json())
      .then(data => {
        const sidebar = document.getElementById('hospital-sidebar');
        sidebar.innerHTML = ''; // Clear previous results

        if (data.length === 0) {
          sidebar.innerHTML = '<p>No hospitals found for this city.</p>';
        } else {
          data.forEach(hospital => {
            const div = document.createElement('div');
            div.innerHTML = `
              <h4>${hospital.name}</h4>
              <p>${hospital.address}</p>
              <hr>
            `;
            sidebar.appendChild(div);
          });
        }
      })
      .catch(err => {
        console.error('Error fetching hospitals:', err);
      });
  }
</script>

        <hr>
        <h5>Health Tips</h5>   
        <ul class="list-unstyled">
            <li><a href="#">Stay Hydrated</a></li>
            <li><a href="#">Eat a Balanced Diet</a></li>
            <li><a href="#">Exercise Regularly</a></li>
            <li><a href="#">Get Enough Sleep</a></li>
            <li><a href="#">Practice Good Hygiene</a></li>
            <li><a href="#">Avoid Smoking and Excessive Alcohol</a></li>   
            <li><a href="#">Regular Health Check-ups</a></li>
            <li><a href="#">Mental Health Awareness</a></li>
            <li><a href="#">Stay Informed About Vaccinations</a></li>
            <li><a href="#">Limit Screen Time</a></li>
            <li><a href="#">Practice Mindfulness and Relaxation Techniques</a></li>
            <li><a href="#">Stay Connected with Loved Ones</a></li>
            <li><a href="#">Seek Help When Needed</a></li>
            <li><a href="#">Know Your Family Medical History</a></li>
            <li><a href="#">Be Aware of Allergies</a></li>
            <li><a href="#">Follow Safety Guidelines</a></li>
            <li><a href="#">Stay Updated on Health News</a></li>
                    
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <h2 class="mb-4">Symptom Checker</h2>
        <form id="symptomForm">
            <h5>By What Hurts</h5>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Abdomen" id="abdomen"><label class="form-check-label" for="abdomen">Abdomen</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Back" id="back"><label class="form-check-label" for="back">Back</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Chest" id="chest"><label class="form-check-label" for="chest">Chest</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Ear" id="ear"><label class="form-check-label" for="ear">Ear</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Head" id="head"><label class="form-check-label" for="head">Head</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Pelvis" id="pelvis"><label class="form-check-label" for="pelvis">Pelvis</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Tooth" id="tooth"><label class="form-check-label" for="tooth">Tooth</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Rectum" id="rectum"><label class="form-check-label" for="rectum">Rectum</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Skin" id="skin"><label class="form-check-label" for="skin">Skin</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Leg" id="leg"><label class="form-check-label" for="leg">Leg</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Chronic pain" id="chronic"><label class="form-check-label" for="chronic">Chronic pain</label></div>
        
            <h5 class="mt-4">Based on How They Feel</h5>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Chills" id="chills"><label class="form-check-label" for="chills">Chills</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Fever" id="fever"><label class="form-check-label" for="fever">Fever</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Paresthesia" id="paresthesia"><label class="form-check-label" for="paresthesia">Paresthesia (numbness, tingling, electric tweaks)</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Light-headed" id="lighthead"><label class="form-check-label" for="lighthead">Light-headed</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Dizzy" id="dizzy"><label class="form-check-label" for="dizzy">Dizzy</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Dizzy blackout" id="dizzy-blackout"><label class="form-check-label" for="dizzy-blackout">Dizzy – about to black out</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Dizzy spinning" id="dizzy-spin"><label class="form-check-label" for="dizzy-spin">Dizzy – with the room spinning around me</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Dry mouth" id="drymouth"><label class="form-check-label" for="drymouth">My mouth is dry</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Nauseated" id="nauseated"><label class="form-check-label" for="nauseated">Nauseated</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Sick" id="sick"><label class="form-check-label" for="sick">Sick</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Flu" id="flu"><label class="form-check-label" for="flu">Like I have the flu</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Vomiting" id="vomit"><label class="form-check-label" for="vomit">Like I have to vomit</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Short of breath" id="sob"><label class="form-check-label" for="sob">Short of breath</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Sleepy" id="sleepy"><label class="form-check-label" for="sleepy">Sleepy</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Sweaty" id="sweaty"><label class="form-check-label" for="sweaty">Sweaty</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Thirsty" id="thirsty"><label class="form-check-label" for="thirsty">Thirsty</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Tired" id="tired"><label class="form-check-label" for="tired">Tired</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Weak" id="weak"><label class="form-check-label" for="weak">Weak</label></div>
        
            <h5 class="mt-4">Based on What They Can't Do</h5>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Breathe normally" id="breathe"><label class="form-check-label" for="breathe">Breathe normally</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Hear normally" id="hear"><label class="form-check-label" for="hear">Hear normally</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Losing hearing" id="hearing-loss"><label class="form-check-label" for="hearing-loss">Losing hearing</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Loud sounds" id="loud"><label class="form-check-label" for="loud">Sounds are too loud</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Tinnitus" id="tinnitus"><label class="form-check-label" for="tinnitus">Ringing or hissing in my ears</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Move one side" id="move-side"><label class="form-check-label" for="move-side">Move one side – arm and/or leg</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Defecate normally" id="defecate"><label class="form-check-label" for="defecate">Defecate normally</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Urinate normally" id="urinate"><label class="form-check-label" for="urinate">Urinate normally</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Remember normally" id="memory"><label class="form-check-label" for="memory">Remember normally</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Blindness" id="blind"><label class="form-check-label" for="blind">Blindness</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Blurred vision" id="blur"><label class="form-check-label" for="blur">Blurred vision</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Double vision" id="double"><label class="form-check-label" for="double">Double vision</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Sleep normally" id="sleep"><label class="form-check-label" for="sleep">Sleep normally</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Smell normally" id="smell"><label class="form-check-label" for="smell">Smell things normally</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Speak normally" id="speak"><label class="form-check-label" for="speak">Speak normally</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Excrete solid feces" id="feces"><label class="form-check-label" for="feces">Excrete solid feces</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Stop scratching" id="scratch"><label class="form-check-label" for="scratch">Stop scratching</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Stop sweating" id="sweat"><label class="form-check-label" for="sweat">Stop sweating</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Swallow normally" id="swallow"><label class="form-check-label" for="swallow">Swallow normally</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Taste properly" id="taste"><label class="form-check-label" for="taste">Taste properly</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Walk normally" id="walk"><label class="form-check-label" for="walk">Walk normally</label></div>
            <div class="form-check"><input class="form-check-input" type="checkbox" value="Write normally" id="write"><label class="form-check-label" for="write">Write normally</label></div>
        
            <button type="submit" class="btn btn-success mt-3">Check Probability</button>
        </form>
        <hr>
        <h5 class="mt-4">Symptoms Selected</h5> 
        <div id="selected-symptoms" class="mb-3">
            <!-- Selected symptoms will be displayed here -->
        </div>
        <button id="clear-symptoms" class="btn btn-secondary btn-sm">Clear Symptoms</button>
        <script>
            document.getElementById('clear-symptoms').addEventListener('click', function() {
                document.querySelectorAll('input[type=checkbox]').forEach(checkbox => {
                    checkbox.checked = false;
                });
                document.getElementById('selected-symptoms').innerHTML = '';
            });

            document.querySelectorAll('input[type=checkbox]').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const selectedSymptoms = Array.from(document.querySelectorAll('input[type=checkbox]:checked')).map(cb => cb.nextElementSibling.innerText).join(', ');
                    document.getElementById('selected-symptoms').innerText = selectedSymptoms;
                });
            });
        </script>
        <hr>
        <h5>Hospital Information</h5>
        <div id="hospital-info" class="mb-3">
            <!-- Hospital data will be inserted here -->
        </div>
        <button id="clear-hospital" class="btn btn-secondary btn-sm">Clear Hospitals</button>
        <script>
            document.getElementById('clear-hospital').addEventListener('click', function() {
                document.getElementById('hospital-info').innerHTML = '';
            });
        </script>
        <hr>
        <h5>Emergency Contact</h5>
        <div class="mb-3">In case of emergency, please call 108 or your local emergency services.</div>
        <div class="mb-3">For non-emergency inquiries, please contact your local health department.</div>   
        <div class="mb-3">For more information, visit <a href="https://www.cdc.gov/">CDC</a> or <a href="https://www.who.int/">WHO</a>.</div>


        <div class="mt-4">
            <h5>Possible Disease Probability</h5>
            <div class="mb-2">Flu</div>
            <div class="meter"><div class="meter-fill" id="flu-meter"></div></div>

            <div class="mt-3 mb-2">COVID-19</div>
            <div class="meter"><div class="meter-fill bg-warning" id="covid-meter"></div></div>

            <div class="mt-3 mb-2">Common Cold</div>
            <div class="meter"><div class="meter-fill bg-info" id="cold-meter"></div></div>
        </div>
    </div>

    <script>
        document.getElementById('symptomForm').addEventListener('submit', function (e) {
            e.preventDefault();
            // Simple simulation based on number of symptoms
            let symptoms = document.querySelectorAll('input[type=checkbox]:checked').length;
            let base = symptoms * 30;

            document.getElementById('flu-meter').style.width = base + '%';
            document.getElementById('covid-meter').style.width = (base - 10) + '%';
            document.getElementById('cold-meter').style.width = (base - 20) + '%';
        });

        document.getElementById('cityForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const city = document.getElementById('city').value.toLowerCase();
            const hospitalDiv = document.getElementById('hospital-info');

            const data = {
                'mumbai': [
                    { name: 'Lilavati Hospital', phone: '022 2675 1000', address: 'Bandra Reclamation, Mumbai' },
                    { name: 'KEM Hospital', phone: '022 2413 7000', address: 'Parel, Mumbai' }
                ],
                'delhi': [
                    { name: 'AIIMS', phone: '011 2658 8500', address: 'Ansari Nagar, Delhi' },
                    { name: 'Fortis Hospital', phone: '011 4530 2222', address: 'Shalimar Bagh, Delhi' }
                ]
            };

            hospitalDiv.innerHTML = '';
            if (data[city]) {
                data[city].forEach(hospital => {
                    hospitalDiv.innerHTML += `
                        <strong>${hospital.name}</strong><br>
                        Phone: ${hospital.phone}<br>
                        Address: ${hospital.address}<br><hr>
                    `;
                });
            } else {
                hospitalDiv.innerHTML = 'No data found for this city.';
            }
        });
    </script>

{% if disease_probabilities %}
<h5 class="mt-5">Disease Probability Meter</h5>
<div class="mt-3">
  {% for disease, prob in disease_probabilities.items() %}
  <div class="mb-2">
    <label>{{ disease }}: {{ prob }}%</label>
    <div class="progress">
      <div class="progress-bar bg-info" role="progressbar" data-prob="{{ prob }}" aria-valuenow="{{ prob }}" aria-valuemin="0" aria-valuemax="100"></div>
    </div>
  </div>
  {% endfor %}
</div>
{% endif %}
    
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <script>
            // Initialize the progress bars with 0 width
            document.querySelectorAll('.meter-fill').forEach(meter => {
                meter.style.width = '0%';
            });

            // Dynamically set progress bar widths
            document.querySelectorAll('.progress-bar').forEach(bar => {
                const prob = bar.getAttribute('data-prob');
                if (prob) {
                    bar.style.width = prob + '%';
                }
            });
        </script>

</body>
</html>
